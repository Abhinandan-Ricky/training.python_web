<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.9.1: http://docutils.sourceforge.net/" />
<meta name="version" content="S5 1.1" />
<title>Internet Programming with Python</title>
<link rel="stylesheet" href="ui/uw_pce_theme/pretty.css" type="text/css" />
<!-- configuration parameters -->
<meta name="defaultView" content="slideshow" />
<meta name="controlVis" content="hidden" />
<!-- style sheet links -->
<script src="ui/uw_pce_theme/slides.js" type="text/javascript"></script>
<link rel="stylesheet" href="ui/uw_pce_theme/slides.css"
      type="text/css" media="projection" id="slideProj" />
<link rel="stylesheet" href="ui/uw_pce_theme/outline.css"
      type="text/css" media="screen" id="outlineStyle" />
<link rel="stylesheet" href="ui/uw_pce_theme/print.css"
      type="text/css" media="print" id="slidePrint" />
<link rel="stylesheet" href="ui/uw_pce_theme/opera.css"
      type="text/css" media="projection" id="operaFix" />
</head>
<body>
<div class="layout">
<div id="controls"></div>
<div id="currentSlide"></div>
<div id="header">

</div>
<div id="footer">
<h1>Internet Programming with Python</h1>
<h2><a class="reference external" href="http://github.com/cewing/training.python_web">View document source</a>.
</h2>
</div>
</div>
<div class="presentation">
<div class="slide" id="slide0">
<h1 class="title">Internet Programming with Python</h1>


</div>
<div class="slide" id="lab-time">
<h1>Lab Time</h1>
<p>For this lab, we'll be building a basic HTTP server.</p>
<ul>
<li><p class="first">update your fork of the class repository by pulling from the <tt class="docutils literal">upstream</tt> remote</p>
</li>
<li><p class="first">find the folder <tt class="docutils literal">assignments/week02/lab</tt> and open <tt class="docutils literal">echo_server.py</tt></p>
<blockquote>
<ul class="simple">
<li>this is a canonical example of what we built last week</li>
</ul>
</blockquote>
</li>
<li><p class="first">We'll move in steps to turn this into an HTTP server.</p>
</li>
</ul>
</div>
<div class="slide" id="lab-time-step-1">
<h1>Lab Time - Step 1</h1>
<p>First, echo an HTTP request</p>
<ul class="simple">
<li>Run <cite>echo_server.py</cite> in a terminal</li>
<li>Point your browser at <tt class="docutils literal"><span class="pre">http://localhost:5000</span></tt>, what do you get back?</li>
<li>Save the script as <tt class="docutils literal">http_serve1.py</tt>, then edit it to make it return the
HTML you find in <tt class="docutils literal">tiny_html.html</tt></li>
<li>What does this look like?</li>
</ul>
</div>
<div class="slide" id="lab-time-step-2">
<h1>Lab Time - Step 2</h1>
<p>Return a proper HTTP response:</p>
<ul class="simple">
<li>Save the file as <tt class="docutils literal">http_serve2.py</tt></li>
<li>Add a new method that takes a string 'body' and returns a proper <tt class="docutils literal">200 OK</tt>
HTTP response.  Call the method <tt class="docutils literal">ok_response</tt>.</li>
<li>Bonus Points: add a GMT <tt class="docutils literal">Date:</tt> header in the proper format (RFC-1123).
<em>hint: see email.utils.formatdate in the python standard library</em></li>
<li>How does the returned HTML look now?</li>
</ul>
</div>
<div class="slide" id="lab-time-step-3">
<h1>Lab Time - Step 3</h1>
<p>Parse an incoming request to get the URI:</p>
<ul class="simple">
<li>Save the file as <tt class="docutils literal">http_serve3.py</tt></li>
<li>Add a new method called <tt class="docutils literal">parse_request</tt> that takes a request and returns a
URI. Have the server print the URI to the console (rudimentary logging).</li>
<li>Make sure that the method validates that the incoming request is HTTP and
that the verb is <tt class="docutils literal">GET</tt>. If either is not true, it should raise a
ValueError</li>
<li>Bonus points: add an <tt class="docutils literal">client_error_response</tt> method that returns an
appropriate HTTP code if the validation from <tt class="docutils literal">parse_request</tt> fails. What
is the right response code?</li>
</ul>
</div>
<div class="slide" id="lab-time-step-4">
<h1>Lab Time - Step 4</h1>
<p>Serve directory listings:</p>
<ul>
<li><p class="first">Save the file as <tt class="docutils literal">http_serve4.py</tt> * Add a method called <tt class="docutils literal">resolve_uri</tt>
which takes as an argument the URI returned from our previous step and
returns an HTTP response. The method should start from a given directory
('web') and check the URI:</p>
<blockquote>
<ul class="simple">
<li>If the URI names a directory, return the content listing as a <tt class="docutils literal">200 OK</tt></li>
<li>If the URI names a file, raise a NotImplementedError (coming soon)</li>
<li>If the URI does not exist, raise a ValueError</li>
</ul>
</blockquote>
</li>
<li><p class="first">Bonus points: add a <tt class="docutils literal">notfound_response</tt> method that returns a proper <tt class="docutils literal">404
Not Found</tt> response to the client. Use it when appropriate. (where is
that?)</p>
</li>
</ul>
</div>
<div class="slide" id="lab-time-step-5">
<h1>Lab Time - Step 5</h1>
<p>Serve different types of files:</p>
<ul class="simple">
<li>Save the file as <tt class="docutils literal">http_serve5.py</tt></li>
<li>Update the <tt class="docutils literal">resolve_uri</tt> method. If the URI names a file, return it as the
body of a <tt class="docutils literal">200 OK</tt> response.</li>
<li>You'll need a way to return the approprate <tt class="docutils literal"><span class="pre">Content-Type:</span></tt> header.</li>
<li>Support at least <tt class="docutils literal">.html</tt>, <tt class="docutils literal">.txt</tt>, <tt class="docutils literal">.jpeg</tt>, and <tt class="docutils literal">.png</tt> files</li>
<li>Try it out.</li>
</ul>
<p class="incremental">You've now got a reasonably functional HTTP web server.  Congratulations!</p>
</div>
<div class="slide" id="assignment">
<h1>Assignment</h1>
<p>Using what you've learned this week, take your new webserver to the next
level. Accomplish as many of the following as you can:</p>
<ul class="simple">
<li>If you were unable to complete the first five steps in class, circle back
and finish them</li>
<li>Complete the 'Bonus point' parts from the first five steps, if you haven't
already done so</li>
<li>Format your directory listing as HTML</li>
<li>In the HTML directory listing, make the files clickable links</li>
<li>Add a new, dynamic endpoint. If the URI /time-page is requested, return an
HTML page with the current time displayed.</li>
</ul>
</div>
<div class="slide" id="submitting-the-assignment">
<h1>Submitting the Assignment</h1>
<ul class="simple">
<li>Copy your final html server into the <tt class="docutils literal">assignments/week02/athome</tt>
directory in your fork of the repository.</li>
<li>Copy the <tt class="docutils literal">assignments/week02/lab/web</tt> directory into
<tt class="docutils literal">assignments/week02/at_home</tt></li>
<li>Make a new plain-text file at the top level of the web directory. Tell me
what you did in it.</li>
<li>Make a new pull request for the week02 assignments.</li>
<li>I should be able to run the server on my local machine, open your plain text
file in my browser, and evaluate your work from there.</li>
<li>For bonus points, set the server running on your VM, with the <tt class="docutils literal">web</tt> home
directory. I should be able to load <a class="reference external" href="http://yourserver.bluboxgrid.com:50000">http://yourserver.bluboxgrid.com:50000</a>
in my web browser and evaluate your results.</li>
</ul>
</div>
<div class="slide" id="lightning-talks">
<h1>Lightning Talks</h1>
<p class="big-centered">Ready, Steady, GO!</p>
</div>
</div>
</body>
</html>
